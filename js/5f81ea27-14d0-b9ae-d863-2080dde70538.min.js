/* Minifyed by 13ninstudio, Inc */ function uint8ToBase64(e){let t=0;const n=e.length;let o="";for(;t<n;){const i=e.subarray(t,Math.min(t+32768,n));o+=String.fromCharCode.apply(null,i),t+=32768}return btoa(o)}function base64ToUint8(e){const t=atob(e),n=t.length,o=new Uint8Array(n);for(let e=0;e<n;e++)o[e]=t.charCodeAt(e);return o}const inputText=document.getElementById("inputText"),btnGzip=document.getElementById("btnGzip"),btnGzipDownload=document.getElementById("btnGzipDownload"),outBase64=document.getElementById("outBase64"),inputSizeEl=document.getElementById("inputSize"),compressedSizeEl=document.getElementById("compressedSize"),levelSelect=document.getElementById("level"),gzipFileInput=document.getElementById("gzipFile"),btnUngzipFile=document.getElementById("btnUngzipFile"),btnUngzipFromBase64=document.getElementById("btnUngzipFromBase64"),outText=document.getElementById("outText");function updateInputSize(){const e=(new TextEncoder).encode(inputText.value).length;inputSizeEl.textContent=e}function doGzip(e,t=6){const n={level:Number(t)};try{return pako.gzip(e,n)}catch(e){throw alert("gzip でエラー: "+e.message),e}}function doUngzip(e){try{return pako.ungzip(e,{to:"string"})}catch(e){throw alert("ungzip でエラー: "+e.message),e}}updateInputSize(),inputText.addEventListener("input",updateInputSize),btnGzip.addEventListener("click",(()=>{const e=doGzip(inputText.value,levelSelect.value);outBase64.value=uint8ToBase64(e),compressedSizeEl.textContent=e.length})),btnGzipDownload.addEventListener("click",(()=>{const e=doGzip(inputText.value,levelSelect.value);compressedSizeEl.textContent=e.length;const t=new Blob([e],{type:"application/gzip"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="data.txt.gz",document.body.appendChild(o),o.click(),o.remove(),setTimeout((()=>URL.revokeObjectURL(n)),3e3)}));let lastLoadedUint8=null;gzipFileInput.addEventListener("change",(e=>{const t=e.target.files&&e.target.files[0];if(!t)return;const n=new FileReader;n.onload=()=>{const e=n.result;lastLoadedUint8=new Uint8Array(e),alert(".gz を読み込みました。ボタンで展開できます。")},n.onerror=()=>alert("ファイル読み込みエラー"),n.readAsArrayBuffer(t)})),btnUngzipFile.addEventListener("click",(()=>{if(!lastLoadedUint8)return alert("まず .gz ファイルを選択してください");const e=doUngzip(lastLoadedUint8);outText.value=e})),btnUngzipFromBase64.addEventListener("click",(()=>{const e=outBase64.value.trim();if(!e)return alert("まず Base64 を用意してください（圧縮結果をコピーして貼り付けるか、上の圧縮で生成してください）");const t=doUngzip(base64ToUint8(e));outText.value=t})),outBase64.addEventListener("paste",(()=>setTimeout((()=>{const e=outBase64.value.trim();if(e)try{const t=base64ToUint8(e),n=pako.ungzip(t,{to:"string"});outText.value=n}catch(e){console.error("Error: ",e)}}),50)));