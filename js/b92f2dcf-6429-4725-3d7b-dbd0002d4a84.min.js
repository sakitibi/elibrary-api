/* Minifyed by 13ninstudio, Inc */ const el=(e,t=document)=>t.querySelector(e),els=(e,t=document)=>Array.from(t.querySelectorAll(e)),state={comps:[]},kinds={text:{title:"テキスト",build:e=>{let t=e.text.value;const l=e.newline.value;"before"===l&&(t="\n"+t),"after"===l&&(t+="\n");return{text:t}}},selector:{title:"セレクタ",build:e=>({selector:e.selector.value,separator:"",...e.selPrefix.value?{text:e.selPrefix.value}:{}})},score:{title:"スコア",build:e=>({score:{name:e.scoreName.value,objective:e.scoreObj.value}})}};function createComp(e="text"){const t=el("#tpl-comp").content.firstElementChild.cloneNode(!0),l=el("h3",t),o=el("select.kind",t),n={text:el('[data-for="text"]',t),selector:el('[data-for="selector"]',t),score:el('[data-for="score"]',t)},c=e=>{Object.keys(n).forEach((t=>{n[t].classList.toggle("hidden",t!==e)})),l.textContent=kinds[e].title};return o.value=e,c(e),o.addEventListener("change",(()=>c(o.value))),el(".btn-del",t).addEventListener("click",(()=>{t.remove(),refresh()})),el(".btn-up",t).addEventListener("click",(()=>{const e=t.previousElementSibling;e&&e.before(t),refresh()})),el(".btn-down",t).addEventListener("click",(()=>{const e=t.nextElementSibling;e&&e.after(t),refresh()})),els("input,select,textarea",t).forEach((e=>e.addEventListener("input",refresh))),t}function readComp(e){const t=el(".kind",e).value,l=kinds[t],o={text:el(".text",e)||{value:""},newline:el(".newline",e)||{value:"no"},selector:el(".selector",e)||{value:""},selPrefix:el(".selPrefix",e)||{value:""},scoreName:el(".scoreName",e)||{value:""},scoreObj:el(".scoreObj",e)||{value:""},color:el(".color",e),fmts:els(".fmt",e),insertion:el(".insertion",e),clickAction:el(".clickAction",e),clickValue:el(".clickValue",e),hoverText:el(".hoverText",e)};let n=l.build(o);const c=o.color.value;c&&(n.color=c),o.fmts.forEach((e=>{e.checked&&(n[e.dataset.k]=!0)})),o.insertion.value&&(n.insertion=o.insertion.value);const r=o.clickAction.value,a=o.clickValue.value.trim();return r&&a&&(n.clickEvent={action:r,value:a}),o.hoverText.value&&(n.hoverEvent={action:"show_text",contents:{text:o.hoverText.value}}),n}function buildJson(){return els("#components > .comp").map(readComp)}function refresh(){const e=buildJson(),t=el("#target").value||"@a";el("#jsonOut").textContent=JSON.stringify(e,null,2),el("#cmdOut").textContent=`/tellraw ${t} `+JSON.stringify(e),localStorage.setItem("tellraw_state",JSON.stringify({target:t,arr:e}))}function add(e="text"){const t=createComp(e);el("#components").appendChild(t),"text"===e&&(el(".text",t).value="テキスト"),"selector"===e&&(el(".selector",t).value="@p"),"score"===e&&(el(".scoreName",t).value="@p",el(".scoreObj",t).value="objective"),refresh()}function loadFromData(e){el("#components").innerHTML="",el("#target").value=e.target||"@a";(e.components||[]).forEach((e=>{let t="text";"selector"in e&&(t="selector"),"score"in e&&(t="score");const l=createComp(t);if(el("#components").appendChild(l),e.color&&(el(".color",l).value=e.color),["bold","italic","underlined","strikethrough","obfuscated"].forEach((t=>{e[t]&&(el(`.fmt[data-k="${t}"]`,l).checked=!0)})),e.insertion&&(el(".insertion",l).value=e.insertion),e.clickEvent&&(el(".clickAction",l).value=e.clickEvent.action,el(".clickValue",l).value=e.clickEvent.value),e.hoverEvent){const t=e.hoverEvent.contents?.text||"";el(".hoverText",l).value=t}"text"===t&&(el(".text",l).value=e.text||""),"selector"===t&&(el(".selector",l).value=e.selector||""),"score"===t&&(el(".scoreName",l).value=e.score?.name||"",el(".scoreObj",l).value=e.score?.objective||"")})),refresh()}function toast(e,t=!1){const l=document.createElement("div");l.textContent=e,l.style.cssText=`position:fixed;bottom:18px;right:18px;background:${t?"#3a1620":"#143522"};border:1px solid ${t?"#ff6b6b":"#2ecc71"};padding:10px 14px;border-radius:12px;z-index:9999;opacity:.98`,document.body.appendChild(l),setTimeout((()=>l.remove()),1600)}el("#addText").addEventListener("click",(()=>add("text"))),el("#addSelector").addEventListener("click",(()=>add("selector"))),el("#addScore").addEventListener("click",(()=>add("score"))),el("#copyCmd").addEventListener("click",(()=>{const e=el("#cmdOut").textContent;navigator.clipboard.writeText(e).then((()=>toast("コピーしました")))})),el("#copyJson").addEventListener("click",(()=>{const e=el("#jsonOut").textContent;navigator.clipboard.writeText(e).then((()=>toast("コピーしました")))})),el("#exportJson").addEventListener("click",(()=>{const e={target:el("#target").value,components:buildJson()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=document.createElement("a");l.href=URL.createObjectURL(t),l.download="tellraw-1.19.4.json",l.click()})),el("#importJson").addEventListener("click",(()=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=()=>{const t=e.files[0];t&&t.text().then((e=>{try{loadFromData(JSON.parse(e))}catch{toast("JSONの読み込みに失敗",!0)}}))},e.click()})),el("#clearAll").addEventListener("click",(()=>{el("#components").innerHTML="",refresh()})),document.addEventListener("keydown",(e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&refresh()}));try{const e=JSON.parse(localStorage.getItem("tellraw_state")||"null");e?loadFromData({target:e.target,components:e.arr}):add("text")}catch{add("text")}refresh();
